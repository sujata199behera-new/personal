<html>
<head>
</head>

<link rel="stylesheet" href="https://unpkg.com/cropperjs@1.6.2/dist/cropper.min.css" />
<script src="https://unpkg.com/cropperjs@1.6.2/dist/cropper.min.js"></script>
<input type="file" id="imageInput" accept="image/*" />
<div style="width: 400px; height: 300px;">
  <img id="preview" style="max-width: 100%;" />
</div>
<button id="cropButton">Crop</button>
<canvas id="outputCanvas"></canvas>
<script>
const imageInput = document.getElementById('imageInput');
const preview = document.getElementById('preview');
const cropButton = document.getElementById('cropButton');
const outputCanvas = document.getElementById('outputCanvas');

let cropper;

imageInput.addEventListener('change', (event) => {
  const file = event.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = (e) => {
    preview.src = e.target.result;

    if (cropper) {
      cropper.destroy(); // Destroy old instance
    }

    cropper = new Cropper(preview, {
      aspectRatio: 16 / 9, // ðŸ”’ Fixed ratio (change as needed)
      viewMode: 1,
      movable: true,
      zoomable: true,
      rotatable: false,
      scalable: false,
    });
  };
  reader.readAsDataURL(file);
});

cropButton.addEventListener('click', () => {
  if (!cropper) return;

  const croppedCanvas = cropper.getCroppedCanvas({
    width: 800, // output width
    height: 450, // output height
  });

  const ctx = outputCanvas.getContext('2d');
  outputCanvas.width = croppedCanvas.width;
  outputCanvas.height = croppedCanvas.height;
  ctx.drawImage(croppedCanvas, 0, 0);
});
</script>
</body>
</html>
